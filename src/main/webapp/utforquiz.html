<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Utf√∏r quizen</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script>
        $(document).ready(function(){

            function getQuestionText(){
                return $.ajax({
                    type: 'GET',
                    url: 'rest/path/getQuestionText',
                    async: false
                }).responseText;
            }

            $("#question").html(getQuestionText());

            var alt = new Array(3);

            for(var i = 0; i < 3; i++){
                alt[i] = new Array(2);
            }

            function getAlt(index){
                var out = [];
                $.ajax({
                    url: 'rest/path/getCurrentAlternatives/' + index,
                    type: 'GET',
                    success: function(data){
                        out = data;
                    },
                    async: false
                });
                return out;
            }

            for(var i = 0; i < 3; i++){
                alt[i] = getAlt(i);
                $("#alt" + i).html(alt[i][0]);
                $("#butt" + i).prop('value', alt[i][1]);
            }

            function checkAnswer(){
                if($("#alternatives input[type=radio]:checked").val() === "Correct"){
                    $.ajax({
                        url: 'rest/path/scoreInc',
                        type: 'POST',
                        data: '',
                        contentType: 'application/json; charset=utf-8',
                        dataType: 'json'
                    });
                }
            }

            function checkQuestions(){
                var out = 0;
                $.ajax({
                    type: 'GET',
                    url: 'rest/path/lastQuestion',
                    success: function(data){
                        out = data;
                    },
                    async: false
                });
                return out;
            }

            $("#submit").click(function(){
                checkAnswer();

                $.ajax({
                    url: 'rest/path/incCurrentQuestion',
                    type: 'POST',
                    data: '',
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json'
                });

                console.log(checkQuestions());

                if(checkQuestions()){
                    window.location.href = "scoreboard.html";
                } else {
                    window.location.reload();
                }
            });

        });
    </script>
</head>
<body>
    <h2 id = "question"></h2>
    <form id = "alternatives">
        <input id = "butt0" type="radio" name="question" value="Alt1"><span id = "alt0"></span><br>
        <input id = "butt1" type="radio" name="question" value="Alt2"><span id = "alt1"></span><br>
        <input id = "butt2" type="radio" name="question" value="Alt3"><span id = "alt2"></span><br><br>
        <input type="button" value="Send inn svar" id = "submit">
    </form>
</body>
</html>