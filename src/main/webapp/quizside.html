<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Quizside</title>
    <link rel="stylesheet" type="text/css" href="http://cdn.datatables.net/1.10.9/css/jquery.dataTables.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="http://cdn.datatables.net/1.10.9/js/jquery.dataTables.min.js"></script>
    <style>
        #quizliste tbody tr:hover{
            cursor: pointer;
            background-color: aqua;
        }
    </style>
    <script>
        $(document).ready(function(){

            var table = $('#quizliste');

            table.DataTable({
                ajax: {
                    url: 'rest/path/getQuizList',
                    dataSrc: ''
                },
                columns: [
                    { data: 'id'},
                    { data: 'name'},
                    { data: 'startTime'}
                ]
            });

//            $('#quizliste tbody').on('click', 'tr', function () {
////                var data = table.row( this ).data();
////                alert(data);
////                alert( 'You clicked on '+data[0]+'\'s row' );
////                alert("Hallo");
////                var data = table.row( $(this).parents('tr') ).data();
////                alert(data);
//            } );

//            $("#tableContainer").click(function(event) {
//                var $target = $(event.target);
//
////                if ($target.prop("tagName") == "TD") {
////                    alert($target.html());
////                } else {
////                    alert("Didn't click the hot spot");
////                }
//                var data = table.row(this).data();
//                alert(data);
//            });

            table.on("click", "tbody tr", function() {
                var data = $(this).find("td:first").text();
                $.ajax({
                    url: 'rest/path/setQuiz/' + data,
                    type: 'POST',
                    data: JSON.stringify(data),
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json'
                });

                $.ajax({
                    url: 'rest/path/setCurrentQuestion/0',
                    type: 'POST',
                    data: '',
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json'
                });

                window.location.href = "utforquiz.html";
            });
        });
    </script>
</head>
<body>
    <a href="nyquizside.html">Lag ny quiz</a>
    <div id = "tableContainer">
    <table id="quizliste">
        <thead>
        <th>Quiz ID</th>
        <th>Quiz navn</th>
        <th>Start-time</th>
        </thead>
    </table>
    </div>
</body>
</html>